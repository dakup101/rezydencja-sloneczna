<?php
$args = array(
    "post_type" => "apartaments",
    "posts_per_page" => -1,
    "tax_query" => array(
        array(
            "taxonomy" => "floor",
            "field" => "slug",
            "terms" => "dach"
        )
    )
);

$aps = new WP_Query($args);
$counter = 0;
$countrr_all = 0;

if ($aps->have_posts()) {
    while ($aps->have_posts()) {
        $aps->the_post();
        echo get_the_title();
        if (get_field("apartament")["status"] == "wolne") $counter++;
        $countrr_all++;
    }
}

wp_reset_postdata();

?>

<div style="position: fixed; display: flex; flex-direction: column; gap: 2rem; align-items: center; justify-content: center; color: white; cursor: pointer; align-items: center; justify-content: center; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.65); text-align: center; z-index: 9999"
    data-floor_plan="3" id="roofCanvas">
    Dostępne <?php echo $counter ?> z <?php echo $countrr_all ?> apartamentów <br> Kliknij poza okienkiem by zamknąć

    <div class="canvas-item position-relative" style="width: 90%; max-width: 1400px">
        <img src="<?php echo get_template_directory_uri() . '/assets/images/roof/roof-1.jpg' ?>" alt=""
            style="width: 100%; cursor: default">
        <a href="<?php echo THEME_DOC . '/A45.pdf' ?>" target="_blank"
            style="position: absolute; top: 11%; left: 15.3%; width: 29.6%; opacity: 30%">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 404.05 231.57">
                <g>
                    <polyline
                        style="fill: <?php echo apartament_color_switch(get_field("apartament", 489)["status"]); ?>"
                        class="cls-1"
                        points="0 0 73.83 0 192.19 0 192.19 160.06 404.05 160.06 404.05 231.34 259.89 231.34 259.89 231.57 174.79 231.57 174.79 222.28 104.2 222.28 104.2 230.59 73.83 230.59 73.83 222.28 73.83 183.07 73.83 88.15 0 88.15 0 0" />
                </g>
            </svg>
        </a>
        <a href="<?php echo THEME_DOC . '/A46.pdf' ?>" target="_blank"
            style="position: absolute; top: 11%; left: 55.3%; width: 29.6%; opacity: 30%">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 404.05 231.57">
                <g>
                    <polyline
                        style="fill: <?php echo apartament_color_switch(get_field("apartament", 493)["status"]); ?>"
                        class="cls-1"
                        points="404.05 0 404.05 88.15 330.23 88.15 330.23 183.07 330.23 222.28 330.23 230.59 299.85 230.59 299.85 222.28 229.26 222.28 229.26 231.57 144.16 231.57 144.16 231.34 0 231.34 0 160.06 211.86 160.06 211.86 0 330.23 0 404.05 0" />
                </g>
            </svg>
        </a>
        <a href="<?php echo THEME_DOC . '/A47.pdf' ?>" target="_blank"
            style="position: absolute; top: 24.3%; left: 79.5%; width: 15.6%; opacity: 30%">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 205.47 257.18">
                <g>
                    <polyline
                        style="fill: <?php echo apartament_color_switch(get_field("apartament", 497)["status"]); ?>"
                        class="cls-1"
                        points="67.09 0 67.09 68.96 205.47 68.96 205.47 238.08 205.47 257.18 103.9 257.18 103.9 238.08 49.39 238.08 49.39 139.77 0 139.77 0 0 67.09 0" />
                </g>
            </svg>
        </a>
        <a href="<?php echo THEME_DOC . '/A48.pdf' ?>" target="_blank"
            style="position: absolute; top: 53.3%; left: 65.5%; width: 21.6%; opacity: 30%">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 289.5 235.89">
                <g>
                    <polyline
                        style="fill: <?php echo apartament_color_switch(get_field("apartament", 501)["status"]); ?>"
                        class="cls-1"
                        points="235.07 0 235.07 52.44 248.08 52.44 289.5 52.44 289.5 65.06 248.08 65.06 248.08 235.89 77.25 235.89 77.25 64.71 0 64.71 0 0 235.07 0" />
                </g>
            </svg>
        </a>
        <a href="<?php echo THEME_DOC . '/A42.pdf' ?>" target="_blank"
            style="position: absolute; top: 53.3%; left: 34.5%; width: 31%; opacity: 30%">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 430.56 193.35">
                <g>
                    <polyline
                        style="fill: <?php echo apartament_color_switch(get_field("apartament", 477)["status"]); ?>"
                        class="cls-1"
                        points="0 64.7 0 0 36.63 0 36.63 4.44 116.97 4.44 116.97 0 153.35 0 276.81 0 312.22 0 312.22 4.66 401.17 4.66 401.17 .37 430.56 .37 430.56 4.66 430.56 64.76 276.81 64.76 276.81 193.35 153.35 193.35 153.35 64.7 0 64.7" />
                </g>
            </svg>
        </a>
        <a href="<?php echo THEME_DOC . '/A43.pdf' ?>" target="_blank"
            style="position: absolute; top: 53.3%; left: 13%; width: 21.6%; opacity: 30%">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 288.77 236.58">
                <g>
                    <polyline
                        style="fill: <?php echo apartament_color_switch(get_field("apartament", 481)["status"]); ?>"
                        class="cls-1"
                        points="0 64.8 0 53.1 41.37 53.1 53.95 53.1 53.95 0 211.11 0 288.77 0 288.77 64.76 211.11 64.76 211.11 236.58 53.95 236.58 41.37 236.58 41.37 64.8 0 64.8" />
                </g>
            </svg>
        </a>
        <a href="<?php echo THEME_DOC . '/A44.pdf' ?>" target="_blank"
            style="position: absolute; top: 25.3%; left: 6%; width: 14.6%; opacity: 30%">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 205 254.74">
                <g>
                    <polyline
                        style="fill: <?php echo apartament_color_switch(get_field("apartament", 485)["status"]); ?>"
                        class="cls-1"
                        points="0 254.74 0 78.4 99.83 78.4 148.7 78.4 148.7 0 205 0 205 138.22 154.53 138.22 154.53 238.39 99.83 238.39 99.83 254.74 0 254.74" />
                </g>
            </svg>
        </a>
    </div>
</div>